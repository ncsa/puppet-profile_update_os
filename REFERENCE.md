# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`profile_update_os`](#profile_update_os): configure functionality for upgrading OS packages
* [`profile_update_os::kernel_upgrade`](#profile_update_os--kernel_upgrade): Apply kernel updates via cron
* [`profile_update_os::kpatch`](#profile_update_os--kpatch): Install kpatch
* [`profile_update_os::scheduled_reboot`](#profile_update_os--scheduled_reboot): Reboot node at scheduled time via cron
* [`profile_update_os::yum_upgrade`](#profile_update_os--yum_upgrade): Apply yum updates via cron

### Functions

* [`profile_update_os::calculate_day_of_week`](#profile_update_os--calculate_day_of_week): Select the default day of the week that a host applies os updates. Wed is default to avoid holidays, long weekends, etc. dev/test nodes updat
* [`profile_update_os::calculate_week_of_month`](#profile_update_os--calculate_week_of_month): Select the default week of the month that a host applies os updates. Calculated to be the modulus 4 of the last character of the short hostna

## Classes

### <a name="profile_update_os"></a>`profile_update_os`

configure functionality for upgrading OS packages

#### Examples

##### 

```puppet
include profile_update_os
```

#### Parameters

The following parameters are available in the `profile_update_os` class:

* [`root_cron_scripts_dir`](#-profile_update_os--root_cron_scripts_dir)

##### <a name="-profile_update_os--root_cron_scripts_dir"></a>`root_cron_scripts_dir`

Data type: `String`

Directory where root cron scripts exist

### <a name="profile_update_os--kernel_upgrade"></a>`profile_update_os::kernel_upgrade`

Apply kernel updates via cron

#### Examples

##### 

```puppet
include profile_update_os::kernel_upgrade
```

#### Parameters

The following parameters are available in the `profile_update_os::kernel_upgrade` class:

* [`enabled`](#-profile_update_os--kernel_upgrade--enabled)
* [`message`](#-profile_update_os--kernel_upgrade--message)
* [`random_delay`](#-profile_update_os--kernel_upgrade--random_delay)
* [`reboot_always`](#-profile_update_os--kernel_upgrade--reboot_always)
* [`reboot_num_pkgs_updated_since_reboot`](#-profile_update_os--kernel_upgrade--reboot_num_pkgs_updated_since_reboot)
* [`reboot_num_pkgs_updated_today`](#-profile_update_os--kernel_upgrade--reboot_num_pkgs_updated_today)
* [`reboot_pkgs_list`](#-profile_update_os--kernel_upgrade--reboot_pkgs_list)
* [`update_day_of_week`](#-profile_update_os--kernel_upgrade--update_day_of_week)
* [`update_hour`](#-profile_update_os--kernel_upgrade--update_hour)
* [`update_minute`](#-profile_update_os--kernel_upgrade--update_minute)
* [`update_months`](#-profile_update_os--kernel_upgrade--update_months)
* [`update_week_of_month`](#-profile_update_os--kernel_upgrade--update_week_of_month)

##### <a name="-profile_update_os--kernel_upgrade--enabled"></a>`enabled`

Data type: `Boolean`

state of whether kernel updates via cron are enabled

##### <a name="-profile_update_os--kernel_upgrade--message"></a>`message`

Data type: `String`

Message broadcast to users before update and reboot

##### <a name="-profile_update_os--kernel_upgrade--random_delay"></a>`random_delay`

Data type: `Integer`

Maximum number of minutes to random delay before applying kernel updates

##### <a name="-profile_update_os--kernel_upgrade--reboot_always"></a>`reboot_always`

Data type: `Boolean`

Always trigger reboot even if no updates require it

##### <a name="-profile_update_os--kernel_upgrade--reboot_num_pkgs_updated_since_reboot"></a>`reboot_num_pkgs_updated_since_reboot`

Data type: `Integer`

Minimum number of packages updated since reboot to trigger reboot
Negative value means to ignore and use script default value

##### <a name="-profile_update_os--kernel_upgrade--reboot_num_pkgs_updated_today"></a>`reboot_num_pkgs_updated_today`

Data type: `Integer`

Minimum number of packages updated today to trigger reboot
Negative value means to ignore and use script default value

##### <a name="-profile_update_os--kernel_upgrade--reboot_pkgs_list"></a>`reboot_pkgs_list`

Data type: `Array[String]`

List of updated packages that should always trigger reboot

##### <a name="-profile_update_os--kernel_upgrade--update_day_of_week"></a>`update_day_of_week`

Data type: `String`

Contains day of week abbreviation for kernel update cron
e.g. "Sun", "Mon", "Tue", etc.
If not defined day of week is calculated from hostname

##### <a name="-profile_update_os--kernel_upgrade--update_hour"></a>`update_hour`

Data type: `Integer`

Hour for kernel update cron
There is a random delay before the kernel update occurs

##### <a name="-profile_update_os--kernel_upgrade--update_minute"></a>`update_minute`

Data type: `Integer`

Minute for kernel update cron
There is a random delay before the kernel update occurs

##### <a name="-profile_update_os--kernel_upgrade--update_months"></a>`update_months`

Data type: `Array[String]`

Names of months (as 3 letter abbreviations) for kernel update cron
Empty array implies to run every month

##### <a name="-profile_update_os--kernel_upgrade--update_week_of_month"></a>`update_week_of_month`

Data type: `String`

Week of the month for kernel update cron, e.g. "1"-"5" or "any"
If not defined cron runs every week

### <a name="profile_update_os--kpatch"></a>`profile_update_os::kpatch`

Install kpatch

#### Examples

##### 

```puppet
include profile_update_os::kpatch
```

#### Parameters

The following parameters are available in the `profile_update_os::kpatch` class:

* [`enabled`](#-profile_update_os--kpatch--enabled)
* [`install_kpatch_patches`](#-profile_update_os--kpatch--install_kpatch_patches)
* [`kpatch_patch_version`](#-profile_update_os--kpatch--kpatch_patch_version)

##### <a name="-profile_update_os--kpatch--enabled"></a>`enabled`

Data type: `Boolean`

Install kpatch package and start service, noop if set to false (no clean-up)

##### <a name="-profile_update_os--kpatch--install_kpatch_patches"></a>`install_kpatch_patches`

Data type: `Boolean`

Install the kpatch-patch package for the current kernel

##### <a name="-profile_update_os--kpatch--kpatch_patch_version"></a>`kpatch_patch_version`

Data type: `String`

Specify the exact kpatch-patch to install (default is to go to latest)

Example locking kpatch-patch to version+release 0-0 under the 4.18.0-372.41.1 kernel:
```
profile_update_os::kpatch::kpatch_patch_version: "4_18_0-372_41_1-0-0.el8_6"
```

### <a name="profile_update_os--scheduled_reboot"></a>`profile_update_os::scheduled_reboot`

Reboot node at scheduled time via cron

#### Examples

##### 

```puppet
include profile_update_os::scheduled_reboot
```

#### Parameters

The following parameters are available in the `profile_update_os::scheduled_reboot` class:

* [`command`](#-profile_update_os--scheduled_reboot--command)
* [`enabled`](#-profile_update_os--scheduled_reboot--enabled)
* [`reboot_day_of_week`](#-profile_update_os--scheduled_reboot--reboot_day_of_week)
* [`reboot_hour`](#-profile_update_os--scheduled_reboot--reboot_hour)
* [`reboot_minute`](#-profile_update_os--scheduled_reboot--reboot_minute)
* [`reboot_months`](#-profile_update_os--scheduled_reboot--reboot_months)
* [`reboot_week_of_month`](#-profile_update_os--scheduled_reboot--reboot_week_of_month)

##### <a name="-profile_update_os--scheduled_reboot--command"></a>`command`

Data type: `String`

Command to handle the reboot

##### <a name="-profile_update_os--scheduled_reboot--enabled"></a>`enabled`

Data type: `Boolean`

state of whether reboots via cron are enabled

##### <a name="-profile_update_os--scheduled_reboot--reboot_day_of_week"></a>`reboot_day_of_week`

Data type: `String`

Contains day of week abbreviation for reboot
e.g. "Sun", "Mon", "Tue", etc.

##### <a name="-profile_update_os--scheduled_reboot--reboot_hour"></a>`reboot_hour`

Data type: `Integer`

Hour for cron reboot

##### <a name="-profile_update_os--scheduled_reboot--reboot_minute"></a>`reboot_minute`

Data type: `Integer`

Minute for reboot

##### <a name="-profile_update_os--scheduled_reboot--reboot_months"></a>`reboot_months`

Data type: `Array[String]`

Names of months (as 3 letter abbreviations) for reboot
Empty array implies to run every month

##### <a name="-profile_update_os--scheduled_reboot--reboot_week_of_month"></a>`reboot_week_of_month`

Data type: `String`

Week of the month for reboot, e.g. "1"-"5" or "any"
If not defined cron runs every week

### <a name="profile_update_os--yum_upgrade"></a>`profile_update_os::yum_upgrade`

While the class name refers to 'yum', this class also supports 'zypper' in SUSE.

#### Examples

##### 

```puppet
include profile_update_os::yum_upgrade
```

#### Parameters

The following parameters are available in the `profile_update_os::yum_upgrade` class:

* [`command`](#-profile_update_os--yum_upgrade--command)
* [`config_file`](#-profile_update_os--yum_upgrade--config_file)
* [`enabled`](#-profile_update_os--yum_upgrade--enabled)
* [`excluded_packages`](#-profile_update_os--yum_upgrade--excluded_packages)
* [`random_delay`](#-profile_update_os--yum_upgrade--random_delay)
* [`package`](#-profile_update_os--yum_upgrade--package)
* [`service`](#-profile_update_os--yum_upgrade--service)
* [`update_day_of_week`](#-profile_update_os--yum_upgrade--update_day_of_week)
* [`update_hour`](#-profile_update_os--yum_upgrade--update_hour)
* [`update_minute`](#-profile_update_os--yum_upgrade--update_minute)
* [`update_months`](#-profile_update_os--yum_upgrade--update_months)
* [`update_week_of_month`](#-profile_update_os--yum_upgrade--update_week_of_month)
* [`yum_config_file`](#-profile_update_os--yum_upgrade--yum_config_file)

##### <a name="-profile_update_os--yum_upgrade--command"></a>`command`

Data type: `String`

Command to apply yum updates for the OS version

##### <a name="-profile_update_os--yum_upgrade--config_file"></a>`config_file`

Data type: `String`

Full path to yum update config file for the OS version

##### <a name="-profile_update_os--yum_upgrade--enabled"></a>`enabled`

Data type: `Boolean`

State of whether yum updates via cron are enabled

##### <a name="-profile_update_os--yum_upgrade--excluded_packages"></a>`excluded_packages`

Data type: `Array`

List of packages to exclude from yum updates

##### <a name="-profile_update_os--yum_upgrade--random_delay"></a>`random_delay`

Data type: `Integer`

Maximum number of minutes to randomly wait before applying yum updates

##### <a name="-profile_update_os--yum_upgrade--package"></a>`package`

Data type: `String`

Package name for the yum update package for the OS version

##### <a name="-profile_update_os--yum_upgrade--service"></a>`service`

Data type: `String`

Service name for the yum update service for the OS version

##### <a name="-profile_update_os--yum_upgrade--update_day_of_week"></a>`update_day_of_week`

Data type: `String`

Day of week abbreviation for yum update cron
e.g. "Sun", "Mon", "Tue", etc.
If not defined day of week is calculated from hostname

##### <a name="-profile_update_os--yum_upgrade--update_hour"></a>`update_hour`

Data type: `Integer`

Hour for yum update cron
There is a random delay of up to 30 minutes before the yum update occurs

##### <a name="-profile_update_os--yum_upgrade--update_minute"></a>`update_minute`

Data type: `Integer`

Minute for yum update cron
There is a random delay of up to 30 minutes before the yum update occurs

##### <a name="-profile_update_os--yum_upgrade--update_months"></a>`update_months`

Data type: `Array[String]`

Names of months (as 3 letter abbreviations) for kernel update cron
Empty array implies to run every month

##### <a name="-profile_update_os--yum_upgrade--update_week_of_month"></a>`update_week_of_month`

Data type: `String`

Week of the month for yum update cron, e.g. "1"-"5" or "any"
If not defined cron runs every week

##### <a name="-profile_update_os--yum_upgrade--yum_config_file"></a>`yum_config_file`

Data type: `String`

Full path to yum config file for the OS version

## Functions

### <a name="profile_update_os--calculate_day_of_week"></a>`profile_update_os::calculate_day_of_week`

Type: Puppet Language

Select the default day of the week that a host applies os updates.
Wed is default to avoid holidays, long weekends, etc.
dev/test nodes update the day before the default for testing.

#### `profile_update_os::calculate_day_of_week(String $hostname)`

Select the default day of the week that a host applies os updates.
Wed is default to avoid holidays, long weekends, etc.
dev/test nodes update the day before the default for testing.

Returns: `String`

##### `hostname`

Data type: `String`



### <a name="profile_update_os--calculate_week_of_month"></a>`profile_update_os::calculate_week_of_month`

Type: Puppet Language

Select the default week of the month that a host applies os updates.
Calculated to be the modulus 4 of the last character of the short hostname.

#### `profile_update_os::calculate_week_of_month(String $hostname)`

Select the default week of the month that a host applies os updates.
Calculated to be the modulus 4 of the last character of the short hostname.

Returns: `String`

##### `hostname`

Data type: `String`



